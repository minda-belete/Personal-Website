{% extends "admin/change_list.html" %}
{% load static %}

{% block extrahead %}
{{ block.super }}
<script src="https://cdn.tiny.cloud/1/tdnv7ti0zwmq3pa0t8zbrzbko6i20vkoyu82c5pfu07qbe5b/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    tinymce.init({
        selector: '#page_description',
        height: 200,
        menubar: false,
        plugins: [
            'advlist', 'autolink', 'lists', 'link', 'charmap', 'preview',
            'searchreplace', 'visualblocks', 'code', 'fullscreen',
            'insertdatetime', 'table', 'help', 'wordcount'
        ],
        toolbar: 'undo redo | formatselect | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link | removeformat | code',
        content_style: 'body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; font-size: 14px; }'
    });
});
</script>
{% endblock %}

{% block content %}
<!-- Research Page Settings Section -->
<div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
    <h2 style="margin-top: 0; color: #2c3e50; font-size: 18px; border-bottom: 2px solid #3498db; padding-bottom: 10px; margin-bottom: 15px;">
        <i class="fas fa-cog"></i> Research Page Settings
    </h2>
    <p style="color: #6c757d; margin-bottom: 15px; font-size: 13px;">
        Customize how your research page appears to visitors. These settings control the page title, description, and section headings.
    </p>
    
    <form method="post" style="background: white; padding: 20px; border-radius: 5px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        {% csrf_token %}
        
        <div style="margin-bottom: 15px;">
            <label for="page_title" style="display: block; font-weight: 600; margin-bottom: 5px; color: #2c3e50;">
                Page Title:
            </label>
            <input type="text" 
                   id="page_title" 
                   name="page_title" 
                   value="{{ research_page_settings.page_title }}"
                   style="width: 100%; padding: 8px 12px; border: 1px solid #ced4da; border-radius: 4px; font-size: 14px;"
                   placeholder="e.g., Research & Publications">
            <small style="display: block; margin-top: 5px; color: #6c757d;">Main title displayed at the top of the research page</small>
        </div>
        
        <div style="margin-bottom: 15px;">
            <label for="page_description" style="display: block; font-weight: 600; margin-bottom: 5px; color: #2c3e50;">
                Page Description:
            </label>
            <textarea id="page_description" 
                      name="page_description" 
                      rows="3"
                      style="width: 100%; padding: 8px 12px; border: 1px solid #ced4da; border-radius: 4px; font-size: 14px;"
                      placeholder="e.g., Explore my research contributions, publications, and academic work.">{{ research_page_settings.page_description }}</textarea>
            <small style="display: block; margin-top: 5px; color: #6c757d;">Bio/introduction text that appears below the title (Rich text editor with formatting options)</small>
        </div>
        
        <div style="margin-bottom: 15px;">
            <label for="all_research_heading" style="display: block; font-weight: 600; margin-bottom: 5px; color: #2c3e50;">
                All Research Section Heading:
            </label>
            <input type="text" 
                   id="all_research_heading" 
                   name="all_research_heading" 
                   value="{{ research_page_settings.all_research_heading }}"
                   style="width: 100%; padding: 8px 12px; border: 1px solid #ced4da; border-radius: 4px; font-size: 14px;"
                   placeholder="e.g., All Publications, Working Papers, Research Projects">
            <small style="display: block; margin-top: 5px; color: #6c757d;">Heading for the section showing all research items</small>
        </div>
        
        <button type="submit" 
                name="save_page_settings" 
                value="1"
                style="background: #3498db; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-weight: 600; font-size: 14px;">
            <i class="fas fa-save"></i> Save Page Settings
        </button>
    </form>
</div>

<!-- Original Research List -->
{{ block.super }}
{% endblock %}
